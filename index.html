<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Marketing Visits Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Google Identity Services -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app">

    <!-- LOGIN SCREEN -->
    <div id="login-screen" class="screen active">
      <div class="login-card">
        <h1>Marketing Activity App</h1>
        <p>Sign in with your NT Woods Google account</p>
        <div id="g_id_onload"
          data-client_id="360849757137-agopfs0m8rgmcj541ucpg22btep5olt3.apps.googleusercontent.com"
          data-context="signin"
          data-ux_mode="popup"
          data-callback="handleGoogleCredential"
          data-auto_prompt="false">
        </div>
        <div class="g_id_signin"
          data-type="standard"
          data-shape="pill"
          data-theme="outline"
          data-text="continue_with"
          data-size="large"
          data-logo_alignment="left">
        </div>
        <div id="login-error" class="error-msg"></div>
      </div>
    </div>

    <!-- MAIN APP -->
    <div id="main-screen" class="screen">
      <header class="top-bar">
        <div>
          <h2>Marketing Activity App</h2>
          <div class="subtitle">
            <span id="user-name"></span> &middot;
            <span id="user-email"></span>
          </div>
        </div>
        <button id="btn-logout" class="btn-outline">Logout</button>
      </header>

      <!-- STATS BARS -->
      <section class="stats-section">
        <div class="stats-card">
          <h3>Follow Ups</h3>
          <div class="stats-row">
            <div class="stat-pill stat-overdue">
              Overdue: <span id="stat-overdue">0</span>
            </div>
            <div class="stat-pill">
              Today: <span id="stat-today">0</span>
            </div>
          </div>
        </div>

        <div class="stats-card">
          <h3>All Activities</h3>
          <div class="stats-row">
            <div class="stat-pill">
              Deal Matured: <span id="stat-matured">0</span>
            </div>
            <div class="stat-pill stat-cancelled">
              Deal Cancelled: <span id="stat-cancelled">0</span>
            </div>
          </div>
        </div>
      </section>

      <!-- TABS -->
      <section class="tabs">
        <button id="tab-followups" class="tab active">Follow Ups</button>
        <button id="tab-activities" class="tab">All Activities</button>
      </section>

      <!-- FILTERS -->
      <section class="filters">
        <div class="filter-group">
          <input type="text" id="search-input" placeholder="Search by client / station..." />
        </div>
        <div class="filter-group" id="filter-followup-container">
          <select id="followup-filter">
            <option value="ALL">All</option>
            <option value="OVERDUE">Overdue</option>
            <option value="TODAY">Today</option>
            <option value="UPCOMING">Upcoming</option>
          </select>
        </div>
        <div class="filter-group hidden" id="filter-activity-container">
          <select id="activity-filter">
            <option value="ALL">All Outcomes</option>
            <option value="FOLLOW_UP">Follow Up</option>
            <option value="DEAL_MATURED">Deal Matured</option>
            <option value="DEAL_CANCELLED">Deal Cancelled</option>
          </select>
        </div>
      </section>

      <!-- CONTENT LISTS -->
      <main class="content">
        <div id="followups-list" class="list active"></div>
        <div id="activities-list" class="list"></div>
      </main>

      <!-- FLOATING ADD BUTTON -->
      <button id="btn-add" class="fab">+</button>
    </div>

    <!-- ACTIVITY MODAL -->
    <div id="activity-modal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <h3 id="modal-title">Add Activity</h3>

        <div class="toggle-row" id="activity-type-toggle">
          <button data-type="CALL" class="toggle-btn active">Call</button>
          <button data-type="VISIT" class="toggle-btn">Visit</button>
        </div>

        <div class="form-group">
          <label>Client Name</label>
          <input type="text" id="client-name" />
        </div>
        <div class="form-group">
          <label>Mobile No.</label>
          <input type="text" id="client-mobile" />
        </div>
        <div class="form-group">
          <label>Station</label>
          <input type="text" id="client-station" />
        </div>
        <div class="form-group" id="address-group">
          <label>Address (short)</label>
          <input type="text" id="client-address" />
        </div>

        <h4>Outcome</h4>
        <div class="toggle-row">
          <button data-outcome="FOLLOW_UP" class="toggle-btn outcome-btn active">Follow Up Required</button>
          <button data-outcome="DEAL_MATURED" class="toggle-btn outcome-btn">Deal Matured</button>
          <button data-outcome="DEAL_CANCELLED" class="toggle-btn outcome-btn">Deal Cancelled</button>
        </div>

        <!-- FOLLOW UP EXTRA FIELDS -->
        <div id="followup-extra">
          <div class="form-group">
            <label>Remark</label>
            <textarea id="followup-remark" rows="2"></textarea>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Next Follow Up Date &amp; Time</label>
              <input type="datetime-local" id="followup-datetime" />
            </div>
            <div class="form-group">
              <label>Next Action</label>
              <select id="followup-next-action">
                <option value="CALL">Call</option>
                <option value="VISIT">Visit</option>
              </select>
            </div>
          </div>
        </div>

        <!-- DEAL MATURED EXTRA -->
        <div id="deal-mature-extra" class="hidden">
          <div class="form-group">
            <label>Dealer Association Form (file)</label>
            <input type="file" id="deal-file" />
          </div>
          <div class="form-group">
            <label>Remark (optional)</label>
            <textarea id="deal-remark" rows="2"></textarea>
          </div>
        </div>

        <!-- DEAL CANCELLED EXTRA -->
        <div id="deal-cancel-extra" class="hidden">
          <div class="form-group">
            <label>Cancellation Remark</label>
            <textarea id="cancel-remark" rows="2"></textarea>
          </div>
        </div>

        <div class="modal-actions">
          <button id="btn-cancel-modal" class="btn-outline">Cancel</button>
          <button id="btn-save-activity" class="btn-primary">Save</button>
        </div>
      </div>
    </div>

    <!-- HISTORY MODAL -->
    <div id="history-modal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content history-modal-content">
        <h3 id="history-title">Client History</h3>
        <div id="history-list" class="history-list"></div>
        <div class="modal-actions">
          <button id="btn-close-history" class="btn-primary">Close</button>
        </div>
      </div>
    </div>

  </div>

  <script src="app.js"></script>
</body>
</html>
